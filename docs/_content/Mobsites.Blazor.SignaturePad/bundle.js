!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){n(1),t.exports=n(2)},function(t,e,n){"use strict";n.r(e),e.default=n.p+"bundle.css"},function(t,e,n){"use strict";function o(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,a=!0,s=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}
/*!
 * Signature Pad v3.0.0-beta.3 | https://github.com/szimek/signature_pad
 * (c) 2018 Szymon Nowak | Released under the MIT license
 */n.r(e);var h=function(){function t(e,n,o){r(this,t),this.x=e,this.y=n,this.time=o||Date.now()}return s(t,[{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time}},{key:"velocityFrom",value:function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}]),t}(),c=function(){function t(e,n,o,i,a,s){r(this,t),this.startPoint=e,this.control2=n,this.control1=o,this.endPoint=i,this.startWidth=a,this.endWidth=s}return s(t,[{key:"length",value:function(){for(var t,e,n=0,o=0;o<=10;o+=1){var i=o/10,r=this.point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var s=r-t,h=a-e;n+=Math.sqrt(s*s+h*h)}t=r,e=a}return n}},{key:"point",value:function(t,e,n,o,i){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*o*(1-t)*t*t+i*t*t*t}}],[{key:"fromPoints",value:function(e,n){var o=this.calculateControlPoints(e[0],e[1],e[2]).c2,i=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new t(e[1],o,i,e[2],n.start,n.end)}},{key:"calculateControlPoints",value:function(t,e,n){var o=t.x-e.x,i=t.y-e.y,r=e.x-n.x,a=e.y-n.y,s=(t.x+e.x)/2,c=(t.y+e.y)/2,u=(e.x+n.x)/2,l=(e.y+n.y)/2,d=Math.sqrt(o*o+i*i),v=Math.sqrt(r*r+a*a),f=v/(d+v),y=u+(s-u)*f,m=l+(c-l)*f,p=e.x-y,g=e.y-m;return{c1:new h(s+p,c+g),c2:new h(u+p,l+g)}}}]),t}();function u(t){var e,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=0,a=null,s=function(){r=Date.now(),a=null,e=t.apply(n,o),a||(n=null,o=[])};return function(){var h=Date.now(),c=i-(h-r);n=this;for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];return o=l,c<=0||c>i?(a&&(clearTimeout(a),a=null),r=h,e=t.apply(n,o),a||(n=null,o=[])):a||(a=window.setTimeout(s,c)),e}}var l=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.canvas=e,this.options=o,this._handleMouseDown=function(t){1===t.which&&(n._mouseButtonDown=!0,n._strokeBegin(t))},this._handleMouseMove=function(t){n._mouseButtonDown&&n._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(t))},this._handleTouchStart=function(t){if(t.preventDefault(),1===t.targetTouches.length){var e=t.changedTouches[0];n._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];n._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){if(t.target===n.canvas){t.preventDefault();var e=t.changedTouches[0];n._strokeEnd(e)}},this.velocityFilterWeight=o.velocityFilterWeight||.7,this.minWidth=o.minWidth||.5,this.maxWidth=o.maxWidth||2.5,this.throttle="throttle"in o?o.throttle:16,this.minDistance="minDistance"in o?o.minDistance:5,this.throttle?this._strokeMoveUpdate=u(t.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=t.prototype._strokeUpdate,this.dotSize=o.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=o.penColor||"black",this.backgroundColor=o.backgroundColor||"rgba(0,0,0,0)",this.onBegin=o.onBegin,this.onEnd=o.onEnd,this._ctx=e.getContext("2d"),this.clear(),this.on()}return s(t,[{key:"clear",value:function(){var t=this._ctx,e=this.canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0}},{key:"fromDataURL",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,i=new Image,r=n.ratio||window.devicePixelRatio||1,a=n.width||this.canvas.width/r,s=n.height||this.canvas.height/r;this._reset(),i.onload=function(){e._ctx.drawImage(i,0,0,a,s),o&&o()},i.onerror=function(t){o&&o(t)},i.src=t,this._isEmpty=!1}},{key:"toDataURL",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",e=arguments.length>1?arguments[1]:void 0;switch(t){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(t,e)}}},{key:"on",value:function(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}},{key:"off",value:function(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}},{key:"isEmpty",value:function(){return this._isEmpty}},{key:"fromData",value:function(t){var e=this;this.clear(),this._fromData(t,(function(t){var n=t.color,o=t.curve;return e._drawCurve({color:n,curve:o})}),(function(t){var n=t.color,o=t.point;return e._drawDot({color:n,point:o})})),this._data=t}},{key:"toData",value:function(){return this._data}},{key:"_strokeBegin",value:function(t){var e={color:this.penColor,points:[]};this._data.push(e),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)}},{key:"_strokeUpdate",value:function(t){var e=t.clientX,n=t.clientY,o=this._createPoint(e,n),i=this._data[this._data.length-1],r=i.points,a=r.length>0&&r[r.length-1],s=!!a&&o.distanceTo(a)<=this.minDistance,h=i.color;if(!a||!a||!s){var c=this._addPoint(o);a?c&&this._drawCurve({color:h,curve:c}):this._drawDot({color:h,point:o}),r.push({time:o.time,x:o.x,y:o.y})}}},{key:"_strokeEnd",value:function(t){this._strokeUpdate(t),"function"==typeof this.onEnd&&this.onEnd(t)}},{key:"_handlePointerEvents",value:function(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)}},{key:"_handleMouseEvents",value:function(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}},{key:"_handleTouchEvents",value:function(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}},{key:"_reset",value:function(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}},{key:"_createPoint",value:function(t,e){var n=this.canvas.getBoundingClientRect();return new h(t-n.left,e-n.top,(new Date).getTime())}},{key:"_addPoint",value:function(t){var e=this._lastPoints;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);var n=this._calculateCurveWidths(e[1],e[2]),o=c.fromPoints(e,n);return e.shift(),o}return null}},{key:"_calculateCurveWidths",value:function(t,e){var n=this.velocityFilterWeight*e.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n),i={end:o,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=o,i}},{key:"_strokeWidth",value:function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)}},{key:"_drawCurveSegment",value:function(t,e,n){var o=this._ctx;o.moveTo(t,e),o.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1}},{key:"_drawCurve",value:function(t){var e=t.color,n=t.curve,o=this._ctx,i=n.endWidth-n.startWidth,r=2*Math.floor(n.length());o.beginPath(),o.fillStyle=e;for(var a=0;a<r;a+=1){var s=a/r,h=s*s,c=h*s,u=1-s,l=u*u,d=l*u,v=d*n.startPoint.x;v+=3*l*s*n.control1.x,v+=3*u*h*n.control2.x,v+=c*n.endPoint.x;var f=d*n.startPoint.y;f+=3*l*s*n.control1.y,f+=3*u*h*n.control2.y,f+=c*n.endPoint.y;var y=n.startWidth+c*i;this._drawCurveSegment(v,f,y)}o.closePath(),o.fill()}},{key:"_drawDot",value:function(t){var e=t.color,n=t.point,o=this._ctx,i="function"==typeof this.dotSize?this.dotSize():this.dotSize;o.beginPath(),this._drawCurveSegment(n.x,n.y,i),o.closePath(),o.fillStyle=e,o.fill()}},{key:"_fromData",value:function(t,e,n){var i,r=o(t);try{for(r.s();!(i=r.n()).done;){var a=i.value,s=a.color,c=a.points;if(c.length>1)for(var u=0;u<c.length;u+=1){var l=c[u],d=new h(l.x,l.y,l.time);this.penColor=s,0===u&&this._reset();var v=this._addPoint(d);v&&e({color:s,curve:v})}else this._reset(),n({color:s,point:c[0]})}}catch(t){r.e(t)}finally{r.f()}}},{key:"_toSVG",value:function(){var t=this,e=this._data,n=Math.max(window.devicePixelRatio||1,1),o=this.canvas.width/n,i=this.canvas.height/n,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width",this.canvas.width.toString()),r.setAttribute("height",this.canvas.height.toString()),this._fromData(e,(function(t){var e=t.color,n=t.curve,o=document.createElement("path");if(!(isNaN(n.control1.x)||isNaN(n.control1.y)||isNaN(n.control2.x)||isNaN(n.control2.y))){var i="M ".concat(n.startPoint.x.toFixed(3),",").concat(n.startPoint.y.toFixed(3)," ")+"C ".concat(n.control1.x.toFixed(3),",").concat(n.control1.y.toFixed(3)," ")+"".concat(n.control2.x.toFixed(3),",").concat(n.control2.y.toFixed(3)," ")+"".concat(n.endPoint.x.toFixed(3),",").concat(n.endPoint.y.toFixed(3));o.setAttribute("d",i),o.setAttribute("stroke-width",(2.25*n.endWidth).toFixed(3)),o.setAttribute("stroke",e),o.setAttribute("fill","none"),o.setAttribute("stroke-linecap","round"),r.appendChild(o)}}),(function(e){var n=e.color,o=e.point,i=document.createElement("circle"),a="function"==typeof t.dotSize?t.dotSize():t.dotSize;i.setAttribute("r",a.toString()),i.setAttribute("cx",o.x.toString()),i.setAttribute("cy",o.y.toString()),i.setAttribute("fill",n),r.appendChild(i)}));var a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+' viewBox="'.concat(0," ").concat(0," ").concat(o," ").concat(i,'"')+' width="'.concat(o,'"')+' height="'.concat(i,'"')+">",s=r.innerHTML;if(void 0===s){var h=document.createElement("dummy"),c=r.childNodes;h.innerHTML="";for(var u=0;u<c.length;u+=1)h.appendChild(c[u].cloneNode(!0));s=h.innerHTML}return"data:image/svg+xml;base64,"+btoa(a+s+"</svg>")}}]),t}();function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}window.Mobsites||(window.Mobsites={Blazor:{}}),window.Mobsites.Blazor.SignaturePads={store:[],init:function(t,e,n){try{var o=this.add(new g(t,e,n));return t.invokeMethodAsync("SetIndex",o),this.store[o].resizeCanvas(),this.initResizeEvent(),t.invokeMethodAsync("RestoreSignatureState"),!0}catch(t){return console.log(t),!1}},add:function(t){for(var e=0;e<this.store.length;e++)if(null==this.store[e])return this.store[e]=t,e;var n=this.store.length;return this.store[n]=t,n},update:function(t,e){this.store[t].update(e)},destroy:function(t){this.store[t]=null},initResizeEvent:function(){1==this.store.length&&window.addEventListener("resize",this.resizeCanvas)},resizeCanvas:function(){clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){window.Mobsites.Blazor.SignaturePads.store.forEach((function(t){t&&t.resizeCanvas()}))}),300)},toDataURL:function(t,e){return this.store[t]._toDataURL(e)},fromDataURL:function(t,e){return this.store[t]._fromDataURL(e)},changePenColor:function(t,e){this.store[t].changePenColor(e)},clear:function(t){this.store[t]._clear()},undo:function(t){this.store[t].undo()},save:function(t,e){this.store[t].save(e)},getDataSize:function(t,e){var n=this.store[t]._toDataURL(e);return null==n?0:n.length},receiveSegment:function(t,e,n){var o=this.store[t]._toDataURL(n);return this.getNextChunk(o,24576*e)},getNextChunk:function(t,e){var n=t.length-e<=24576?t.length-e:24576,o=t.substring(e,e+n);return e+=n,o},saveSignatureState:function(t,e,n){this.store[t].saveSignatureState(e,n)},restoreSignatureState:function(t,e,n){this.store[t].restoreSignatureState(e,n)}};var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,o,i,r=(e=a,function(){var t,n=m(e);if(y()){var o=m(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return f(this,t)});function a(t,e,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=r.call(this,e.canvas,{penColor:n.color?n.color:"black"})).dotNetObjRef=t,o.elemRefs=e,o.dotNetObjOptions=n,o.onEnd=function(){this.dotNetObjRef.invokeMethodAsync("SignatureChanged")},o}return n=a,(o=[{key:"resizeCanvas",value:function(){var t=this.toDataURL(),e=Math.max(window.devicePixelRatio||1,1);this.canvas.width=this.canvas.offsetWidth*e,this.canvas.height=this.canvas.offsetHeight*e,this.canvas.getContext("2d").scale(e,e),this.fromDataURL(t)}},{key:"update",value:function(t){this.dotNetObjOptions=t,this.penColor=t.color?t.color:"black"}},{key:"_toDataURL",value:function(t){var e=null;if(!this.isEmpty())switch(t){case"png":e=this.toDataURL("image/png");break;case"svg":e=this.toDataURL("image/svg+xml");break;case"jpg":e=this.toDataURL_JPEG(this.dotNetObjOptions.contrastMode)}return e}},{key:"_fromDataURL",value:function(t){this.fromDataURL(t,{ratio:Math.max(window.devicePixelRatio||1,1),width:this.dotNetObjOptions.maxWidth,height:this.dotNetObjOptions.maxHeight})}},{key:"toDataURL_JPEG",value:function(t){var e="";if(t&&1==t)e=this.toDataURL("image/jpeg");else{var n=this.canvas.cloneNode(!0),o=n.getContext("2d");o.fillStyle="#FFF",o.fillRect(0,0,n.width,n.height),o.drawImage(this.canvas,0,0),e=n.toDataURL("image/jpeg")}return e}},{key:"changePenColor",value:function(t){this.penColor=t,this.dotNetObjRef.invokeMethodAsync("ChangeColor",t)}},{key:"_clear",value:function(){this.clear(),this.dotNetObjRef.invokeMethodAsync("SignatureChanged")}},{key:"undo",value:function(){var t=this.toData();t&&(t.pop(),this.fromData(t),this.dotNetObjRef.invokeMethodAsync("SignatureChanged"))}},{key:"save",value:function(t){var e=this._toDataURL(t);e&&this.download(e,"signature."+t)}},{key:"download",value:function(t,e){var n=document.createElement("a");n.style="display: none",n.href=t,n.download=e,n.target="_blank",document.body.appendChild(n),n.click()}},{key:"saveSignatureState",value:function(t,e){var n=this.toDataURL();n?e?sessionStorage.setItem(t,n):localStorage.setItem(t,n):e?sessionStorage.removeItem(t):localStorage.removeItem(t)}},{key:"restoreSignatureState",value:function(t,e){var n=e?sessionStorage.getItem(t):localStorage.getItem(t);n&&this.fromDataURL(n,{ratio:Math.max(window.devicePixelRatio||1,1),width:this.canvas.width,height:this.canvas.height})}}])&&v(n.prototype,o),i&&v(n,i),a}(l)}]);